import{o as Q,i as V}from"./lifecycle.D1DLjaLH.js";import{d as k,a as y,p as W,b as X,s as Z,m as $,g as e,r as o,e as l,h as g,u as d,t as T,i as C}from"./template.DQxjygcm.js";import{s as c}from"./render.Clo92Wsj.js";import{e as D,i as M}from"./each.CZT3H_mf.js";import{p as A,s as N}from"./props.CQ3QyfCF.js";import{I as P}from"./zh_TW.BW8a2Ucy.js";import{i as F}from"./translation.Ca-OfPLI.js";import"./utils.BNwjkPnd.js";import"./config.CFh-wKzw.js";var tt=k(`<a class="group btn-plain !block h-10 w-full rounded-lg hover:text-[initial]"><div class="flex flex-row justify-start items-center h-full"><div class="w-[15%] md:w-[10%] transition text-sm text-right text-50"> </div> <div class="w-[15%] md:w-[10%] relative dash-line h-full flex items-center"><div class="transition-all mx-auto w-1 h-1 rounded group-hover:h-5
                       bg-[oklch(0.5_0.05_var(--hue))] group-hover:bg-[var(--primary)]
                       outline outline-4 z-50
                       outline-[var(--card-bg)]
                       group-hover:outline-[var(--btn-plain-bg-hover)]
                       group-active:outline-[var(--btn-plain-bg-active)]"></div></div> <div class="w-[70%] md:max-w-[65%] md:w-[65%] text-left font-bold
                     group-hover:translate-x-1 transition-all group-hover:text-[var(--primary)]
                     text-75 pr-8 whitespace-nowrap overflow-ellipsis overflow-hidden"> </div> <div class="hidden md:block md:w-[15%] text-left text-sm transition
                     whitespace-nowrap overflow-ellipsis overflow-hidden text-30"> </div></div></a>`),et=k(`<div><div class="flex flex-row w-full items-center h-[3.75rem]"><div class="w-[15%] md:w-[10%] transition text-2xl font-bold text-right text-75"> </div> <div class="w-[15%] md:w-[10%]"><div class="h-3 w-3 bg-none rounded-full outline outline-[var(--primary)] mx-auto
                  -outline-offset-[2px] z-50 outline-3"></div></div> <div class="w-[70%] md:w-[80%] transition text-left text-50"> </div></div> <!></div>`),at=k('<div class="card-base px-8 py-6"></div>');function mt(K,f){X(f,!1);let h=A(f,"tags",12),p=A(f,"categories",12),L=A(f,"sortedPosts",24,()=>[]);const v=new URLSearchParams(window.location.search);h(v.has("tag")?v.getAll("tag"):[]),p(v.has("category")?v.getAll("category"):[]);const O=v.get("uncategorized");let z=$([]);function R(a){const r=(a.getMonth()+1).toString().padStart(2,"0"),n=a.getDate().toString().padStart(2,"0");return`${r}-${n}`}function U(a){return a.map(r=>`#${r}`).join(" ")}Q(async()=>{let a=L();h().length>0&&(a=a.filter(t=>Array.isArray(t.data.tags)&&t.data.tags.some(i=>h().includes(i)))),p().length>0&&(a=a.filter(t=>t.data.category&&p().includes(t.data.category))),O&&(a=a.filter(t=>!t.data.category)),a=a.slice().sort((t,i)=>i.data.published.getTime()-t.data.published.getTime());const r=a.reduce((t,i)=>{const u=i.data.published.getFullYear();return t[u]||(t[u]=[]),t[u].push(i),t},{}),n=Object.keys(r).map(t=>({year:Number.parseInt(t,10),posts:r[Number.parseInt(t,10)]}));n.sort((t,i)=>i.year-t.year),Z(z,n)}),V();var x=at();D(x,5,()=>e(z),M,(a,r)=>{var n=et(),t=l(n),i=l(t),u=l(i,!0);o(i);var I=g(i,4),Y=l(I);o(I),o(t);var q=g(t,2);D(q,1,()=>(e(r),d(()=>e(r).posts)),M,(w,s)=>{var m=tt(),S=l(m),b=l(S),B=l(b,!0);o(b);var _=g(b,4),E=l(_,!0);o(_);var j=g(_,2),G=l(j,!0);o(j),o(S),o(m),T((H,J)=>{N(m,"href",(e(s),d(()=>e(s).url||`/posts/${e(s).id}/`))),N(m,"aria-label",(e(s),d(()=>e(s).data.title))),c(B,H),c(E,(e(s),d(()=>e(s).data.title))),c(G,J)},[()=>(e(s),d(()=>R(e(s).data.published))),()=>(e(s),d(()=>U(e(s).data.tags)))]),y(w,m)}),o(n),T(w=>{c(u,(e(r),d(()=>e(r).year))),c(Y,`${e(r),d(()=>e(r).posts.length)??""} ${w??""}`)},[()=>(C(F),e(r),C(P),d(()=>F(e(r).posts.length===1?P.postCount:P.postsCount)))]),y(a,n)}),o(x),y(K,x),W()}export{mt as default};
